{% extends "base.html" %}
{% block content %}

<div class="container py-4">

    <div class="row g-4">
        <div class="col-md-6">
            <img src="{{ vehicle.image.url }}" class="img-fluid rounded shadow">
        </div>

        <div class="col-md-6">
            <h2 class="fw-bold">{{ vehicle.name }}</h2>
            <p class="text-muted">{{ vehicle.vehicle_type|title }}</p>

            <h4 class="fw-semibold">
                Rs. {{ vehicle.price_per_day }} / day
            </h4>
            <h4 class="fw-semibold">
                Rs. {{ vehicle.price_per_hour }} / hour
            </h4>
            <p class="mt-3">
                <strong>Pickup Address:</strong> {{ vehicle.pickup_address }}
            </p>
            <div class="mt-3 mb-4">
            <div id="map" style="height: 300px; border-radius: 8px;"></div>
            </div>
            <p class="mt-3">{{ vehicle.description }}</p>

            {% if vehicle.is_available %}
                <a href="{% url 'book_vehicle' vehicle.id %}" class="btn btn-dark mt-3">Book Now
                </a>
            {% else %}
                <span class="badge bg-danger mt-3">Not Available</span>
            {% endif %}
        </div>
    </div>

</div>
<!-- Leaflet CSS & JS (FREE) -->
<link
  rel="stylesheet"
  href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
/>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
  document.addEventListener('DOMContentLoaded', function() {
      // Get coordinates from Django context
      const latitude = {{ latitude|default:"27.7172" }};
      const longitude = {{ longitude|default:"85.3240" }};

      // Initialize map
      const map = L.map('map').setView([latitude, longitude], 13);

      // Add tile layer
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
          attribution: 'Â© OpenStreetMap contributors'
      }).addTo(map);

      // Add marker
      L.marker([latitude, longitude]).addTo(map)
          .bindPopup('{{ vehicle.vehicle_name }} Pickup Location')
          .openPopup( );
  });
</script>

{% endblock %}
